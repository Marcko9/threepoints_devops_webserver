name: continous-integration-marco-ramirez

on:
  push:
    branches:
    - master
    - 'feature*'
    - 'hotfix*'
jobs:
  build:
    runs-on: ubuntu-latest    
    steps:
        - name: Checkout master
          uses: actions/checkout@master
        - name: Pruebas de SAST
          run: echo "Ejecuci√≥n de pruebas de SAST"
        - name: List
          run: |
            ls -l
            pwd
        - name: Create new credentials file
          uses: nowactions/envsubst@v1
          with:
            input: ./credentials.ini.tpl
            output: ./credentials.ini
        - name: Crear el archivo de credenciales
          env:
            USUARIO_NOMBRE: ${{ secrets.USERNAME }}
            USUARIO_PASSWORD: ${{ secrets.PASSWORD }}
          run: |
            echo 'Username: ${{ secrets.USERNAME }}'
            echo 'Pass ${{ secrets.PASSWORD }}'                   
            echo 'Pass clave ${{ secrets.PASSWORD }}' | sed 's/./& /g'                        
            echo "Username var: ${USUARIO_NOMBRE}"
            echo "Pass var: ${USUARIO_PASSWORD}"
            cat credentials.ini.tpl
            sudo envsubst < credentials.ini.tpl > /tmp/credentials.ini
            cat /tmp/credentials.ini


